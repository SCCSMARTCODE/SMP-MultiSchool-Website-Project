{% extends 'auth_template/school_admin/third_layout.html' %}


 {% block style %}
 <style>
     table {
         width: 100%;
         border-collapse: collapse;
     }
 
     th, td {
         padding: 10px;
         border-bottom: 1px solid #ddd;
         text-align: left;
     }
 
     th {
         background-color: #f3cece;
         padding: 10px;
         font-size: 20px;
         font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
     }
 
     .expand-btn, button {
         background-color: #5271f8;
         border: none;
         color: white;
         padding: 8px 12px;
         text-align: center;
         text-decoration: none;
         display: inline-block;
         font-size: 14px;
         cursor: pointer;
         border-radius: 4px;
     }
     .expand-btn:hover, button:hover{
         background-color: #002fff;
     }
 
     .expand-btn:focus{
         outline-color: rgb(127, 204, 255);
     }
  
     .student-info {
         display: none;
     }
 
     .show {
         display: table-row;
     }
     .data{
         padding: 5px;
         font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
     }
     
 </style>
{% endblock style %}


{% block main %}
<table>
    <thead style="padding: 80px;">
      <tr>
        <th>Strict Registration</th>
        {% if mode %}
            <th><span style="background-color: Green; padding: 7px; color: aliceblue; border-radius: 5px;">True</span></th>
        {% else %}
            <th><span style="background-color: red; padding: 7px; color: aliceblue; border-radius: 5px;">False</span></th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
        <tr class="test-row">
            <td> Authorized Users </td>
            <td>
            <button class="expand-btn">Expand</button>
            </td>
        </tr>
        

        <tr class="student-info">
            <td colspan="2">
              <!-- Student information will be displayed here -->
              <ol>
                    {% for user in strict_users %}
                        <li class="data">{{ user.gmail }}</li>
                    {% endfor %}
              </ol>
            </td>
            
        </tr>
    </tbody>
</table>

<div class="col-md-8"style="margin-left: 15%;">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="flash-message {{ category }}" style="text-align: center; width: 30vw; margin-left: 12%; margin-top: 40vh;">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
</div>
<div class="registration_control">
    <h3>School Registration Management</h3>
    <form action="" method="post">
        <label for="registration_mode">Select Registration Mode:</label>
        <select id="registration_mode" name="registration_mode">
          <option value="0">Basic Registration</option>
          <option value="1">Strict Registration</option>
        </select>
        <button type="submit">Submit</button>
      </form>

      <form action="" method="post">
        <label for="authorized_user_gmail">Authorized User's Gmail:</label>
        <input type="gmail" id="authorized_user_gmail" name="authorized_user_gmail" required>
        <button type="submit" name="action" value="add">Add User</button>
        <button type="submit" name="action" value="remove" class="rem">Remove User</button>
      </form>
      
      
</div>


{% endblock main %}



{% block script %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const expandButtons = document.querySelectorAll('.expand-btn');
    
        expandButtons.forEach(button => {
            button.addEventListener('click', function() {
                const studentInfoRow = this.closest('.test-row').nextElementSibling;
                const registrationControl = document.querySelector('.registration_control');
    
                // Toggle visibility of student info row
                studentInfoRow.classList.toggle('show');
    
                // Hide registration control if student info row is expanded
                if (studentInfoRow.classList.contains('show')) {
                    registrationControl.style.display = 'none';
                } else {
                    registrationControl.style.display = 'block';
                }
            });
        });
    });
    </script>

{% endblock script %}